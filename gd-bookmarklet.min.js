if(typeof jQuery==="undefined"){alert("The grid displayer requires jQuery + TW Bootstrap or Foundation.")}else{var removeGridDisplayer=function(){jQuery("#grid-displayer-tools").remove();jQuery("#grid-displayer").remove()},gdIsBuilt=false,buildGridDisplayer=function(h){var b=jQuery("#grid-displayer .gd-container"),j=jQuery("#grid-displayer .gd-row"),f=jQuery("#grid-displayer-tools"),c="",a=parseInt(f.find("#gdt-nbcols").val());if(gdIsBuilt){b.removeClass().addClass("gd-container");j.removeClass().addClass("gd-row").css("border-right",0).empty();f.find(".framework-specific").hide()}for(var e=0;e<a;e++){c+='<div class="gd-column">&nbsp;</div>'}j.append(c);var g=j.find(".gd-column"),d=false;switch(h){case"bo":b.addClass("container");j.addClass("row");g.addClass("span1");f.find(".twb").css("display","inline-block");break;case"bf":b.addClass("container-fluid");j.addClass("row-fluid");g.addClass("span1");f.find(".twb").css("display","inline-block");break;case"f3":j.addClass("row");g.addClass("one columns").filter(":odd").addClass("dontshow");d=true;break;case"f2":j.addClass("row");g.addClass("one columns");break}setGridColor(f.find("#gdt-color").val(),d);setGridOpacity(f.find("#gdt-opacity").val(),d);if(!gdIsBuilt){f.find("#gdt-options").css("display","block");f.find("#gdt-ok").css("display","block");setGridZindex(f.find("#gdt-zindex").val());jQuery("#grid-displayer").show();gdIsBuilt=true}},setGridColor=function(a,b){jQuery("#grid-displayer .gd-column:not(.dontshow)").css("background-color",a);if(b){setBorderStyle()}},setGridOpacity=function(a,b){jQuery("#grid-displayer .gd-column:not(.dontshow)").css("opacity",a);if(b){setBorderStyle()}},setGridZindex=function(a){jQuery("#grid-displayer").css("z-index",a)},setBorderStyle=function(){var a=jQuery("#grid-displayer .gd-column:first-child").css("opacity"),b=jQuery("#grid-displayer .gd-column:first-child").css("background-color").replace("rgb","rgba").replace(")",", "+a+")");jQuery("#grid-displayer .gd-row").css("border-right","2px solid "+b)};if(jQuery("#grid-displayer").length){removeGridDisplayer()}else{var dataGridFramework=jQuery("body").data("grid-framework"),dataGridNbcols=jQuery("body").data("grid-nbcols"),dataGridColor=jQuery("body").data("grid-color"),dataGridOpacity=jQuery("body").data("grid-opacity"),dataGridZindex=jQuery("body").data("grid-zindex"),gdFramework=(typeof dataGridFramework==="undefined")?"":dataGridFramework,gdNbcols=(typeof dataGridNbcols==="undefined")?"12":dataGridNbcols,gdColor=(typeof dataGridColor==="undefined")?"red":dataGridColor,gdOpacity=(typeof dataGridOpacity==="undefined")?"0.3":dataGridOpacity,gdZindex=(typeof dataGridZindex==="undefined")?"0":dataGridZindex;var gridHtml='<div id="grid-displayer" style="display: none;"><div class="gd-container"><div class="gd-row"></div></div></div>',frameworks={bo:"Bootstrap",bf:"Bootstrap (fluid)",f3:"Foundation 3",f2:"Foundation 2"},gridToolsHtml='<div id="grid-displayer-tools">';gridToolsHtml+='  <div class="gdt-field"><select id="gdt-framework">';gridToolsHtml+="    <option>&darr; Choose your framework</option>";jQuery.each(frameworks,function(a,b){gridToolsHtml+='<option value="'+a+'"';gridToolsHtml+=(a==gdFramework)?" selected":"";gridToolsHtml+=">"+b+"</option>"});gridToolsHtml+='    <option value="tired">I\'m tired of choosing my framework</option>';gridToolsHtml+="  </select></div>";gridToolsHtml+='  <div id="gdt-options" class="gdt-field">';gridToolsHtml+='    <div><label for="gdt-color">Columns colour</label><input type="text" id="gdt-color" value="'+gdColor+'" /></div>';gridToolsHtml+='<div><label for="gdt-opacity">Opacity</label><input type="text" id="gdt-opacity" value="'+gdOpacity+'" /></div>';gridToolsHtml+='<div class="framework-specific twb"><label for="gdt-nbcols">Nb cols</label><input type="text" id="gdt-nbcols" value="'+gdNbcols+'" /></div>';gridToolsHtml+='<div><label for="gdt-zindex">z-index</label><input type="text" id="gdt-zindex" value="'+gdZindex+'" /></div>';gridToolsHtml+="  </div>";gridToolsHtml+='  <div class="gdt-button" id="gdt-ok"><a href="#">OK</a></div>';gridToolsHtml+='  <div class="gdt-button"><a href="#" id="gdt-close">Close</a></div>';gridToolsHtml+="</div>";jQuery("head").append("<link rel='stylesheet' type='text/css' href='http://alefeuvre.github.com/foundation-grid-displayer/stylesheets/gd-bookmarklet.min.css'>");jQuery("body").prepend(gridHtml).prepend(gridToolsHtml);jQuery("#grid-displayer-tools").delay(1200).fadeTo("slow",0.1);if(typeof dataGridFramework!=="undefined"){buildGridDisplayer(gdFramework)}jQuery("#grid-displayer-tools #gdt-framework").change(function(){if(jQuery(this).val()=="tired"){window.open("http://snipt.net/jiraisurfer/custom-parameters-for-foundation-grid-displayer/")}else{gdFramework=jQuery(this).val();if(gdFramework=="f3"||gdFramework=="f2"){jQuery("#grid-displayer-tools #gdt-nbcols").val(12)}buildGridDisplayer(gdFramework)}});jQuery("#grid-displayer-tools #gdt-nbcols").change(function(){buildGridDisplayer(gdFramework)});jQuery("#grid-displayer-tools #gdt-color").change(function(){setGridColor(jQuery(this).val(),gdFramework=="f3")});jQuery("#grid-displayer-tools #gdt-opacity").change(function(){setGridOpacity(jQuery(this).val(),gdFramework=="f3")});jQuery("#grid-displayer-tools #gdt-zindex").change(function(){setGridZindex(jQuery(this).val())});jQuery("#grid-displayer-tools #gdt-close").click(function(){removeGridDisplayer()})}};
